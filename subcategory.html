<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Product Listing â€” Responsive</title>
<style>
  :root{
    --blue: #0b68ff;
    --muted:#6b7280;
    --bg:#f5f7fa;
    --card:#ffffff;
    --accent: #16a34a;
    --radius:14px;
    --soft:#eef2ff;
    --shadow: 0 6px 18px rgba(15,23,42,0.07);
    font-family: Inter, "Segoe UI", Roboto, Arial, sans-serif;
  }

  html,body{height:100%;margin:0;background:var(--bg);color:#111;}
  .app{
    min-height:100vh;
    display:flex;
    flex-direction:column;
  }

  /* Top blue area */
  .top {
    background: var(--blue);
    color: #fff;
    padding:14px 12px;
    display:flex;
    align-items:center;
    gap:10px;
  }
.back {
    cursor: pointer !important;
    position: relative;
    z-index: 99999;      /* force it to be on top */
}

.back svg, 
.back * {
    pointer-events: none !important; /* make sure svg doesn't eat the click */
}

  .searchbar{
    flex:1;
    display:flex;
    align-items:center;
    gap:10px;
    background: rgba(255,255,255,0.12);
    padding:8px 10px;
    border-radius:50px;
  }
  .searchbar input{
    background:transparent;border:0;outline:0;color:#fff;font-size:15px;width:100%;
  }
  .icon-btn{width:34px;height:34px;border-radius:8px;background:rgba(255,255,255,0.12);display:flex;align-items:center;justify-content:center;}

  /* Location row */
  .location-row{
    display:flex;align-items:center;gap:8px;padding:12px 16px;background:transparent;color:#111;font-size:14px;
  }
  .location-row .pin{color:var(--muted);}

  /* controls */
  .controls{
    display:flex;gap:10px;padding:12px 12px;
    align-items:center;
  }
  .btn{
    background:#fff;padding:8px 12px;border-radius:999px;border:1px solid #e6e9ef;box-shadow:0 1px 0 rgba(0,0,0,0.02);
    display:inline-flex;align-items:center;gap:8px;font-weight:600;font-size:14px;cursor:pointer;
  }
  .btn.secondary{background:transparent;border:1px solid #e6e9ef;}
  .badge{background:#ff3b30;color:#fff;padding:2px 8px;border-radius:999px;font-weight:700;font-size:12px;}

  /* tabs */
  .tabs{
    display:flex;gap:8px;padding:10px 12px;overflow:auto;
  }
  .tab{
    background:rgba(11,104,255,0.06);padding:8px 14px;border-radius:20px;font-weight:600;color:var(--blue);white-space:nowrap;cursor:pointer;border:1px solid rgba(11,104,255,0.08);
  }
  .tab.inactive{background:#fff;color:var(--muted);border:1px solid #eceff3;}

  /* product grid */
  .grid{
    padding:10px;
    display:grid;
    grid-template-columns: repeat(2,1fr);
    gap:12px;
  }

  .card{
    background:var(--card);
    border-radius:16px;
    padding:12px;
    box-shadow: var(--shadow);
    border:1px solid #eef1f6;
    display:flex;
    flex-direction:column;
    gap:10px;
    position:relative;
  }
  .card .imgwrap{
    background:linear-gradient(180deg, #fff, #fafafa);
    border-radius:12px;
    min-height:150px;
    display:flex;align-items:center;justify-content:center;
    overflow:hidden;
  }
  .card img{max-width:100%;max-height:140px;object-fit:contain;}
  .wishlist {
    position:absolute; right:12px; top:10px;background:transparent;border-radius:999px;padding:6px;
  }
  .meta{
    font-size:13px;color:var(--muted);font-weight:700;
  }
  .title{font-size:14px;color:#111;margin:0;line-height:1.2;font-weight:600;}
  .price-row{display:flex;align-items:center;gap:8px;margin-top:6px;}
  .price{font-weight:800;font-size:16px;}
  .old{font-size:13px;color:#98a0aa;text-decoration:line-through;}
  .offer{background:#e6f6ef;color:var(--accent);padding:4px 8px;border-radius:8px;font-weight:700;font-size:12px;}

  /* bottom banner (green promo) */
  .promo{
    margin:12px;
    background: #1eaa53;
    color:#fff;
    padding:10px 14px;
    border-radius:8px;
    text-align:center;
    font-weight:700;
  }

  /* bottom nav */
  .bottom-nav{
    position:fixed;left:12px;right:12px;bottom:12px;background:#fff;border-radius:16px;padding:8px 10px;display:flex;gap:6px;align-items:center;justify-content:space-around;box-shadow:0 8px 30px rgba(2,6,23,0.12);border:1px solid #eef1f6;
    z-index:40;
  }
  .nav-item{display:flex;flex-direction:column;align-items:center;font-size:12px;color:var(--muted);gap:4px;cursor:pointer;}
  .nav-item.active{color:var(--blue);font-weight:700;}

  /* modal (filters) */
  .modal-back{position:fixed;inset:0;background:rgba(0,0,0,0.35);display:none;align-items:flex-end;justify-content:center;padding:0 12px;z-index:60;}
  .modal{background:#fff;border-radius:16px;padding:14px;width:100%;max-width:760px;box-shadow:0 -10px 30px rgba(2,6,23,0.12);}
  .modal h3{margin:0 0 10px 0;}
  .filter-row{display:flex;gap:8px;flex-wrap:wrap;}
  .chip{border:1px solid #eef1f6;padding:8px 10px;border-radius:999px;background:#fff;font-weight:600;cursor:pointer;}
  .chip.active{background:var(--blue);color:#fff;border-color:var(--blue);}

  /* small screens adjustments */
  @media (max-width:420px){
    .card .imgwrap{min-height:120px}
    .grid{gap:10px}
    .top{padding:12px}
  }

  /* desktop/wider */
  @media (min-width:900px){
    .grid{grid-template-columns:repeat(4,1fr);padding:20px;gap:18px}
    .top{padding:18px 32px}
    .controls{padding:18px 32px}
    .tabs{padding:12px 32px}
  }
</style>
</head>
<body>
<div class="app">

  <!-- Top blue search -->
  <div class="top">
<a href="index.html" class="back" title="Back" style="text-decoration:none;">
  <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
    <path d="M15 6l-6 6 6 6" stroke="#fff" stroke-width="2"
          stroke-linecap="round" stroke-linejoin="round"></path>
  </svg>
</a>

    <div class="searchbar" role="search" aria-label="Search products">
      <svg width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M21 21l-4.35-4.35" stroke="#fff" stroke-width="2" stroke-linecap="round"/><circle cx="11" cy="11" r="6" stroke="#fff" stroke-width="2"/></svg>
      <input id="search" type="search" placeholder="Search JioMart" aria-label="Search" />
      <div style="width:6px"></div>
    </div>

    <div class="icon-btn" title="Cart">
      <a href="cart.html">
      <svg width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M3 3h2l.4 2M7 13h10l3-8H6.4" stroke="#fff" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/></svg>
   </a>   </div>
  </div>

  <!-- Location -->
  <div class="location-row">
    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" class="pin"><path d="M12 21s7-4.35 7-10a7 7 0 10-14 0c0 5.65 7 10 7 10z" stroke="#6b7280" stroke-width="1.2" fill="none"/></svg>
    <div style="font-weight:700">Sunrise Apt Zoobe</div>
    <div style="margin-left:auto;color:var(--muted);font-size:13px;">Change</div>
  </div>

  <!-- controls -->
  <div class="controls">
    <div class="btn" id="categoryBtn">Fashion â–¾</div>
    <div style="flex:1"></div>
    <div class="btn secondary" id="sortBtn">â†• Sort</div>
    <div class="btn" id="filterBtn">âš™ Filter <span class="badge" id="filterCount" style="margin-left:6px;display:inline-block">2</span></div>
  </div>

  <!-- tabs -->
  <div class="tabs" id="tabs">
    <div class="tab" data-key="all">All</div>
    <div class="tab inactive" data-key="backpacks">Vegtables</div>
    <div class="tab inactive" data-key="laptopbags">Fruits</div>
    <div class="tab inactive" data-key="travelbags">Chopped Veggies</div>
    <div class="tab inactive" data-key="wallets">Seaonal</div>
  </div>
<div id="subTabs" style="
    display:flex;
    gap:10px;
    padding:10px 15px;
    overflow-x:auto;
    background:#fff;
    border-bottom:1px solid #e5e7eb;
"></div>

  <!-- product grid -->
  <div class="grid" id="grid"></div>

  <!-- promo -->
  <div class="promo">ðŸŽ‰ Yay! Get FREE delivery with first 3 orders.</div>

  <!-- bottom nav -->
  <div class="bottom-nav" role="navigation" aria-label="Main navigation">
    <div class="nav-item active"><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><path d="M3 11l9-7 9 7v8a1 1 0 0 1-1 1h-5v-6H9v6H4a1 1 0 0 1-1-1z" stroke="currentColor" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round"/></svg><div>Home</div></div>
    <div class="nav-item"><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><path d="M3 6h18M3 12h18M3 18h18" stroke="currentColor" stroke-width="1.4" stroke-linecap="round"/></svg><div>Categories</div></div>
    <div class="nav-item"><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><circle cx="12" cy="8" r="3" stroke="currentColor" stroke-width="1.2"/><path d="M6 20c0-3 3-5 6-5s6 2 6 5" stroke="currentColor" stroke-width="1.2" stroke-linecap="round"/></svg><div>Account</div></div>
    <div class="nav-item"><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><path d="M12 22c4-1 7-3 8-6M4 16c1 3 4 5 8 6" stroke="currentColor" stroke-width="1.2"/></svg><div>Orders</div></div>
    <div class="nav-item"><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><path d="M21 12a9 9 0 10-18 0 9 9 0 0018 0z" stroke="currentColor" stroke-width="1.2"/><path d="M12 8v4l3 3" stroke="currentColor" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round"/></svg><div>Alerts</div></div>
  </div>

  <!-- filter modal -->
  <div class="modal-back" id="modalBack" aria-hidden="true">
    <div class="modal" role="dialog" aria-modal="true" aria-label="Filter options">
      <h3>Filters</h3>
      <p style="margin:6px 0 8px 0;color:var(--muted);font-size:13px">Tap chips to toggle filters</p>
      <div class="filter-row" id="filterChips">
        <div class="chip">Under â‚¹500</div>
        <div class="chip">â‚¹500 - â‚¹1000</div>
        <div class="chip">Best Seller</div>
        <div class="chip">Free Delivery</div>
        <div class="chip">4â˜… & up</div>
        <div class="chip">New Arrival</div>
      </div>

      <div style="display:flex;gap:8px;margin-top:12px;">
        <button id="applyFilters" class="btn" style="flex:1">Apply</button>
        <button id="clearFilters" class="btn secondary" style="flex:1">Clear</button>
      </div>
    </div>
  </div>

</div>

<script>
    // Create subcategory tabs for the CURRENT category

  document.querySelectorAll(".card").forEach(card => {
    card.addEventListener("click", function (e) {
      // prevent click on wishlist heart opening card.html
      if (e.target.closest(".wishlist")) return;

      window.location.href = "card.html";
    });
  });

function loadSubTabs() {
    const catObj = CATEGORIES.find(c => c.name === cat);
    if (!catObj) return;

    const tabBox = document.getElementById("subTabs");
    tabBox.innerHTML = "";

    catObj.subs.forEach(s => {
        const t = document.createElement("div");

        t.innerText = s.name;
        t.style.padding = "8px 14px";
        t.style.borderRadius = "20px";
        t.style.fontSize = "14px";
        t.style.whiteSpace = "nowrap";
        t.style.cursor = "pointer";

        if (s.name === sub) {
            t.style.background = "#0b68ff";
            t.style.color = "#fff";
            t.style.fontWeight = "600";
        } else {
            t.style.background = "#f1f5ff";
            t.style.color = "#333";
        }

        t.onclick = () => {
            // Change ONLY the subcategory
            const newURL = new URL(location.href);
            newURL.searchParams.set("sub", s.name);
            history.replaceState(null, "", newURL);

            // Force page reload to load correct items
            location.reload();
        };

        tabBox.appendChild(t);
    });
}

/* Sample dataset. Replace images with real product images as needed */
const PRODUCTS = [
  {
    id:1,
    brand:"Fresh Farm",
    title:"Fresh Tomatoes (1kg)",
    type:"vegetables",
    price:1.80,
    old:2.20,
    offer:"18% OFF",
    img:"https://images.pexels.com/photos/1435908/pexels-photo-1435908.jpeg"
  },
  {
    id:2,
    brand:"Green Valley",
    title:"Red Onions (1kg)",
    type:"vegetables",
    price:1.20,
    old:1.60,
    offer:"25% OFF",
    img:"https://images.pexels.com/photos/616404/pexels-photo-616404.jpeg"
  },
  {
    id:3,
    brand:"Organic Farm",
    title:"Carrots (1kg)",
    type:"vegetables",
    price:1.50,
    old:1.90,
    offer:"21% OFF",
    img:"https://images.pexels.com/photos/616401/pexels-photo-616401.jpeg"
  },
  {
    id:4,
    brand:"SomFresh",
    title:"Bell Peppers Mixed (500g)",
    type:"vegetables",
    price:1.90,
    old:2.40,
    offer:"20% OFF",
    img:"https://images.pexels.com/photos/4198023/pexels-photo-4198023.jpeg"
  },

  // Fruits
  {
    id:5,
    brand:"Tropical Farm",
    title:"Bananas (1kg)",
    type:"fruits",
    price:1.10,
    old:1.40,
    offer:"20% OFF",
    img:"https://images.pexels.com/photos/4198044/pexels-photo-4198044.jpeg"
  },
  {
    id:6,
    brand:"Fresh Orchard",
    title:"Apples Red (1kg)",
    type:"fruits",
    price:2.10,
    old:2.60,
    offer:"19% OFF",
    img:"https://images.pexels.com/photos/102104/pexels-photo-102104.jpeg"
  },

  // Chopped Veggies
  {
    id:7,
    brand:"KitchenReady",
    title:"Chopped Onions (250g)",
    type:"chopped",
    price:0.90,
    old:1.10,
    offer:"18% OFF",
    img:"https://images.pexels.com/photos/4198024/pexels-photo-4198024.jpeg"
  },
  {
    id:8,
    brand:"KitchenReady",
    title:"Chopped Mixed Veg (300g)",
    type:"chopped",
    price:1.40,
    old:1.80,
    offer:"22% OFF",
    img:"https://images.pexels.com/photos/4198023/pexels-photo-4198023.jpeg"
  },

  // Seasonal
  {
    id:9,
    brand:"Seasonal",
    title:"Mangoes (1kg)",
    type:"seasonal",
    price:2.50,
    old:3.20,
    offer:"22% OFF",
    img:"https://images.pexels.com/photos/52514/mango-fruit-exotic-close-52514.jpeg"
  },
  {
    id:10,
    brand:"Seasonal",
    title:"Watermelon (Whole)",
    type:"seasonal",
    price:3.80,
    old:4.50,
    offer:"15% OFF",
    img:"https://images.pexels.com/photos/6157055/pexels-photo-6157055.jpeg"
  }
];


/* state */
let state = {
  tab: 'all',
  query: '',
  activeFilters: new Set(),
  favorites: new Set(),
  sort: null
};

/* DOM refs */
const grid = document.getElementById('grid');
const tabs = document.getElementById('tabs');
const searchInput = document.getElementById('search');
const modalBack = document.getElementById('modalBack');
const filterBtn = document.getElementById('filterBtn');
const filterChips = document.getElementById('filterChips');
const filterCountBadge = document.getElementById('filterCount');
const sortBtn = document.getElementById('sortBtn');

/* render products based on state */
function render(){
  // filter by tab
  let list = PRODUCTS.filter(p=>{
    if(state.tab === 'backpacks') return p.title.toLowerCase().includes('backpack');
    if(state.tab === 'laptopbags') return p.title.toLowerCase().includes('laptop');
    if(state.tab === 'travelbags') return p.title.toLowerCase().includes('travel');
    return true;
  });

  // search
  if(state.query.trim()){
    const q = state.query.toLowerCase();
    list = list.filter(p => (p.title + ' ' + p.brand).toLowerCase().includes(q));
  }

  // filters (simple demo)
  if(state.activeFilters.has('Under â‚¹500')){
    list = list.filter(p => p.price <= 500);
  }
  if(state.activeFilters.has('Free Delivery')){
    // simulate: keep all for demo
  }

  // sort
  if(state.sort === 'price-asc') list.sort((a,b)=>a.price-b.price);
  if(state.sort === 'price-desc') list.sort((a,b)=>b.price-a.price);

  // render
  grid.innerHTML = '';
  list.forEach(p=>{
    const el = document.createElement('div');
    el.className = 'card';
    el.innerHTML = `
      <button class="wishlist" aria-label="Toggle favorite" data-id="${p.id}">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="${state.favorites.has(p.id) ? '#ff3b30' : 'none'}" stroke="${state.favorites.has(p.id) ? '#ff3b30' : '#c6cbd6'}" stroke-width="1.3" stroke-linecap="round" stroke-linejoin="round">
          <path d="M20.8 7.3a5.3 5.3 0 0 0-7.5 0L12 8.6l-1.3-1.3a5.3 5.3 0 0 0-7.5 7.5L12 22l8.8-7.3a5.3 5.3 0 0 0 0-7.4z"></path>
        </svg>
      </button>
      <a href="card.html" class="card">

      <div class="imgwrap"><img alt="${p.title}" src="${p.img}" /></div>
      <div class="meta">${p.brand}</div>
      <div class="title">${p.title}</div>
      <div class="price-row">
        <div class="price">â‚¹${p.price.toLocaleString()}</div>
        <div class="old">â‚¹${p.old.toLocaleString()}</div>
        <div style="margin-left:auto" class="offer">${p.offer}</div>
      </div>
      </a>
    `;
    grid.appendChild(el);
  });

  // wire wishlist buttons
  document.querySelectorAll('.wishlist').forEach(btn=>{
    btn.onclick = (e)=>{
      const id = Number(btn.getAttribute('data-id'));
      if(state.favorites.has(id)) state.favorites.delete(id);
      else state.favorites.add(id);
      render();
      e.stopPropagation();
    };
  });

}

/* tabs click */
tabs.addEventListener('click', (e)=>{
  const tab = e.target.closest('.tab');
  if(!tab) return;
  // highlight
  tabs.querySelectorAll('.tab').forEach(t=>t.classList.add('inactive'));
  tab.classList.remove('inactive');
  state.tab = tab.dataset.key;
  render();
});

/* search */
let debounceTimer;
searchInput.addEventListener('input',(e)=>{
  clearTimeout(debounceTimer);
  debounceTimer = setTimeout(()=>{
    state.query = e.target.value;
    render();
  },250);
});

/* filter modal open */
filterBtn.addEventListener('click', ()=>{
  modalBack.style.display = 'flex';
  modalBack.setAttribute('aria-hidden','false');
});

/* modal close when clicking backdrop */
modalBack.addEventListener('click', (e)=>{
  if(e.target === modalBack){
    modalBack.style.display = 'none';
    modalBack.setAttribute('aria-hidden','true');
  }
});

/* chips toggle */
filterChips.addEventListener('click', (e)=>{
  const chip = e.target.closest('.chip');
  if(!chip) return;
  const txt = chip.textContent.trim();
  chip.classList.toggle('active');
  if(state.activeFilters.has(txt)) state.activeFilters.delete(txt);
  else state.activeFilters.add(txt);
  filterCountBadge.textContent = state.activeFilters.size;
});

/* apply/clear */
document.getElementById('applyFilters').addEventListener('click', ()=>{
  modalBack.style.display = 'none';
  modalBack.setAttribute('aria-hidden','true');
  render();
});
document.getElementById('clearFilters').addEventListener('click', ()=>{
  state.activeFilters.clear();
  filterChips.querySelectorAll('.chip').forEach(c=>c.classList.remove('active'));
  filterCountBadge.textContent = 0;
});

/* sort dropdown (simple) */
sortBtn.addEventListener('click', ()=>{
  const choice = prompt('Sort by (enter): price-asc / price-desc / none', state.sort || 'none');
  if(choice === 'none' || choice === null) state.sort = null;
  else if(choice === 'price-asc' || choice === 'price-desc') state.sort = choice;
  render();
});

/* initial render */
render();

/* accessibility: close modal with Esc */
document.addEventListener('keydown', (e)=>{
  if(e.key === 'Escape') {
    modalBack.style.display='none';
    modalBack.setAttribute('aria-hidden','true');
  }
});
loadSubTabs();
document.querySelector(".back").onclick = () => {
    window.location.href = "home.html";
};
setTimeout(() => {
    const backBtn = document.querySelector(".back");
    backBtn.addEventListener("click", (e) => {
        e.stopPropagation();
        window.location.href = "home.html";
    });
}, 50);

</script>
</body>
</html>
